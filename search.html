<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="/resources/gl_logo.svg"/>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <style>
      body {
        height: 100%;
      }
      body,
      div,
      button {
        font-size: 1em;
      }
      #search-combo button {
        width: 100%;
        text-align: center;
      }
      .dropdown-item{
        white-space:normal;
      }
      .bootstrap-select .dropdown-menu{
        max-height: 20vh;
      }
      .container {
        position: relative;
        padding-top: 50px;
        padding-bottom: 200px;
        min-height: 100%;
      }
    </style>
    <script type="text/javascript" src="/js/addrDrop.js"></script>
    <script type="text/javascript" src="/js/setDetail.js"></script>
    <script type="text/javascript" src="/js/searchBtn.js"></script>
    <script type="text/javascript">
      window.onload = function() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        console.log(params);

        const paramlength = Object.keys(params).length;
        addGames();

        if((paramlength == 0) | (paramlength == undefined)) {
          $("#search-title").text("오락실 검색");
          $("#search-subtitle").text("아래에 조건을 입력해주세요");
        }else {
          $("#search-title").html('<div class="spinner-border" role="status" style="width:1.5rem; height:1.5rem;"></div> 검색 중...');

          var condText = "";
          $.each(params, function(idx, item) {
            condText = condText + item + ',';
          });
          $("#search-subtitle").text((params.city1+','+params.city2+','+getGameName(params.game)).slice(0, -1));

          $("#city1").val(params.city1);
          secondAddr();
          $("#city2").val(params.city2);
        }
      };
    </script>
    <title>Goraku List</title>
  </head>
  <body>
    <!-- Navigation Bar Start -->
    <div id="nav-placeholder"></div>
    <!-- Navigation Bar End -->
    <div class="container vh-100">
      <div class="row mt-3">
        <div class="col">
          <h5 class="display-5" id="search-title"></h5>
          <p class="lead" id="search-subtitle"></p>
        </div>
      </div>
      <div class="row justify-content-between align-items-center" id="search-combo">
        <div class="col-4 pr-1">
          <select id="city1" name="city1" class="selectpicker" onchange="secondAddr()" data-width="100%">
            <option value="전국">전국</option>
            <option value="sut">서울</option>
            <option value="bsg">부산</option>
            <option value="icg">인천</option>
            <option value="dgg">대구</option>
            <option value="gjg">광주</option>
            <option value="djg">대전</option>
            <option value="sjs">세종</option>
            <option value="ggb">경기북부</option>
            <option value="ggn">경기남부</option>
            <option value="kwd">강원</option>
            <option value="ccb">충북</option>
            <option value="ccn">충남</option>
            <option value="jlb">전북</option>
            <option value="jln">전남</option>
            <option value="gsb">경북</option>
            <option value="gsn">경남</option>
            <option value="jjd">제주</option>
            <option value="기타">기타</option>
          </select>
        </div>
        <div class="col-4 px-1">
          <select id="city2" name="city2" class="selectpicker" data-width="100%" data-none-selected-text="전체">
            <option value="전체">전체</option>
          </select>
        </div>
        <div class="col-4 pl-1">
          <button type="button" class="btn btn-outline-dark" onclick="searchCond()">검색</button>
        </div>
      </div>
      <div class="row">
        <div class="col-12 mt-2">
          <button class="btn btn-light w-100" type="button"
                  data-toggle="collapse" data-target="#detail-content"
                  aria-expanded="false" aria-controls="detail-content">
                  상세 검색
          </button>
          <div class="collapse" id="detail-content" style="margin-top: 1vh">
            <small>
              <ul class="list-group list-group-flush">
                <li id="game1" class="list-group-item py-1"><span class="badge bg-danger" style="color:white">리듬</span></li>
                <li id="game2" class="list-group-item py-1"><span class="badge bg-warning" style="color:white">격투</span></li>
                <li id="game3" class="list-group-item py-1"><span class="badge bg-success" style="color:white">레이싱</span></li>
                <li id="game4" class="list-group-item py-1"><span class="badge bg-info" style="color:white">슈팅</span></li>
                <li id="game5" class="list-group-item py-1"><span class="badge bg-primary" style="color:white">액션</span></li>
                <li id="game6" class="list-group-item py-1"><span class="badge bg-secondary" style="color:white">퍼즐/캐쥬얼/스포츠</span></li>
                <li id="game7" class="list-group-item py-1"><span class="badge bg-dark" style="color:white">기타</span></li>
              </ul>
            </small>
          </div>
        </div>
      </div>
      <div class="row mt-3 justify-content-center align-items-center" style="height: 30vh">
        <div class="col text-center">
          <h2>No Searched</h2>
        </div>
      </div>
    </div>
    <div id="footer-placeholder"></div>
    <!-- bootstrap-select depend on bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script>
      $.get("/navbar.html", function (data) {
        $("#nav-placeholder").replaceWith(data);
      });
      $.get("/footer.html", function (data) {
        $("#footer-placeholder").replaceWith(data);
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
  </body>
</html>
