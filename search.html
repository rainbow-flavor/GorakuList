<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <style>
      body,
      div,
      button {
        font-size: 1em;
      }
      #search-combo button {
        width: 100%;
        text-align: center;
      }
    </style>
    <script type="text/javascript" src="/GorakuList/js/addrDrop.js"></script>
    <script type="text/javascript" src="/GorakuList/js/searchBtn.js"></script>
    <script type="text/javascript" src="/GorakuList/js/setDetail.js"></script>
    <script type="text/javascript">
      window.onload = function() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        console.log(params);

        const paramlength = Object.keys(params).length;
        addGames();

        if(paramlength == 0 | paramlength == undefined) {
          $("#search-title").text("오락실 검색");
          $("#search-subtitle").text("아래에 조건을 입력해주세요");
        }
        else {
          $("#search-title").html('<div class="spinner-border" role="status" style="width:1.5rem; height:1.5rem;"></div> 검색 중...');

          var condText = "";
          $.each(params, function(idx, item) {
            condText = condText + item + ","
          });
          $("#search-subtitle").text(condText.slice(0, -1));

          $("#city1").val(params.city1);
          secondAddr();
          $("#city2").val(params.city2);
        }
      }
    </script>
    <title>Goraku List</title>
  </head>
  <body>
    <div class="container">
      <div class="row mt-3">
        <div class="col">
          <h5 class="display-5" id="search-title"></h5>
          <p class="lead" id="search-subtitle"></p>
        </div>
      </div>
      <div class="row justify-content-between align-items-center" id="search-combo">
        <div class="col-4 pr-1">
          <select id="city1" name="city1" onchange="secondAddr()">
            <option value="전국">전국</option>
            <option value="서울">서울</option>
            <option value="부산">부산</option>
            <option value="인천">인천</option>
            <option value="대구">대구</option>
            <option value="광주">광주</option>
            <option value="대전">대전</option>
            <option value="세종">세종</option>
            <option value="경기북부">경기북부</option>
            <option value="경기남부">경기남부</option>
            <option value="강원">강원</option>
            <option value="충북">충북</option>
            <option value="충남">충남</option>
            <option value="전북">전북</option>
            <option value="전남">전남</option>
            <option value="경북">경북</option>
            <option value="경남">경남</option>
            <option value="제주">제주</option>
            <option value="기타">기타</option>
          </select>
        </div>
        <div class="col-4 px-1">
          <select id="city2" name="city2">
            <option value="전체">전체</option>
          </select>
        </div>
        <div class="col-4 pl-1">
          <button type="button" class="btn btn-outline-dark" onclick="searchCond()">검색</button>
        </div>
      </div>
      <div class="row">
        <div class="col-12 mt-2">
          <button class="btn btn-light w-100" type="button"
                  data-toggle="collapse" data-target="#detail-content"
                  aria-expanded="false" aria-controls="detail-content">
            상세 검색
          </button>
          <div class="collapse" id="detail-content" style="margin-top: 1vh">
            <small>
              <ul class="list-group list-group-flush">
                <li id="game1" class="list-group-item py-1"><span class="badge bg-danger" style="color:white">리듬</span></li>
                <li id="game2" class="list-group-item py-1"><span class="badge bg-warning" style="color:white">격투</span></li>
                <li id="game3" class="list-group-item py-1"><span class="badge bg-success" style="color:white">레이싱</span></li>
                <li id="game4" class="list-group-item py-1"><span class="badge bg-info" style="color:white">슈팅</span></li>
                <li id="game5" class="list-group-item py-1"><span class="badge bg-primary" style="color:white">액션</span></li>
                <li id="game6" class="list-group-item py-1"><span class="badge bg-secondary" style="color:white">퍼즐/캐쥬얼/스포츠</span></li>
                <li id="game7" class="list-group-item py-1"><span class="badge bg-dark" style="color:white">기타</span></li>
              </ul>
            </small>
          </div>
        </div>
      </div>
      <div class="row mt-3 justify-content-center align-items-center" style="height: 30vh">
        <div class="col text-center">
          <h2>No Searched</h2>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
